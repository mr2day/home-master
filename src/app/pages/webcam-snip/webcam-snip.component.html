<div class="webcam-container">
  <div class="webcam-wrapper">
    <video
      #videoElement
      class="webcam-video"
      autoplay
      playsinline
    ></video>

    @if (errorMessage) {
      <div class="error-message">
        {{ errorMessage }}
      </div>
    }
  </div>
  <div class="left-controls">
    <div class="focus-control">
      <label for="focus-input">Focus</label>
      <div class="focus-input-group">
        <button class="focus-btn" (click)="adjustFocusBy(1)">+</button>
        <input
          id="focus-input"
          type="text"
          [value]="focusValue()"
          (change)="onFocusInputChange($event)"
          class="focus-input"
        />
        <button class="focus-btn" (click)="adjustFocusBy(-1)">-</button>
      </div>
    </div>
    <div class="focus-control">
      <label for="brightness-input">Brightness</label>
      <div class="focus-input-group">
        <button class="focus-btn" (click)="adjustBrightnessBy(1)">+</button>
        <input
          id="brightness-input"
          type="text"
          [value]="brightnessValue()"
          (change)="onBrightnessInputChange($event)"
          class="focus-input"
        />
        <button class="focus-btn" (click)="adjustBrightnessBy(-1)">-</button>
      </div>
    </div>
    <div class="focus-control">
      <label for="exposure-compensation-input">Exposure</label>
      <div class="focus-input-group">
        <button class="focus-btn" (click)="adjustExposureCompensationBy(1)">+</button>
        <input
          id="exposure-compensation-input"
          type="text"
          [value]="exposureCompensationValue()"
          (change)="onExposureCompensationInputChange($event)"
          class="focus-input"
        />
        <button class="focus-btn" (click)="adjustExposureCompensationBy(-1)">-</button>
      </div>
    </div>
  </div>
  <div class="button-group">
    <div class="controls-column">
      <div class="focus-control">
        <label for="resolution-input">Resolution</label>
        <div class="focus-input-group">
          <select
            id="resolution-input"
            [value]="resolutionValue()"
            (change)="onResolutionInputChange($event)"
            class="resolution-select"
          >
            <option value="2592x1944">2592x1944</option>
            <option value="2560x1440">2560x1440</option>
            <option value="1920x1080">1920x1080</option>
            <option value="1280x720">1280x720</option>
            <option value="640x480">640x480</option>
          </select>
        </div>
      </div>
    </div>
    <div class="controls-column">
      <div class="focus-control">
        <label for="shutter-speed-input">Shutter</label>
        <div class="focus-input-group">
          <button class="focus-btn" (click)="adjustShutterSpeedBy(1)">+</button>
          <input
            id="shutter-speed-input"
            type="text"
            [value]="shutterSpeedValue()"
            (change)="onShutterSpeedInputChange($event)"
            class="focus-input"
          />
          <button class="focus-btn" (click)="adjustShutterSpeedBy(-1)">-</button>
        </div>
      </div>
      <div class="focus-control">
        <label for="contrast-input">Contrast</label>
        <div class="focus-input-group">
          <button class="focus-btn" (click)="adjustContrastBy(1)">+</button>
          <input
            id="contrast-input"
            type="text"
            [value]="contrastValue()"
            (change)="onContrastInputChange($event)"
            class="focus-input"
          />
          <button class="focus-btn" (click)="adjustContrastBy(-1)">-</button>
        </div>
      </div>
      <div class="action-controls">
        <div class="record-info">
          @if (isRecording()) {
            <span class="recording-indicator"><span class="recording-dot"></span> Recording</span>
            <span class="recording-time">{{ recordingTime() }}</span>
          }
        </div>
        <div class="buttons">
          <h-button
            [label]="isRecording() ? 'Stop' : 'Record'"
            [size]="'sm'"
            [ratio]="'square'"
            [action]="toggleRecordingAction"
          ></h-button>
          <h-button
            [label]="'Snip'"
            [size]="'md'"
            [ratio]="'square'"
            [action]="snip"
          ></h-button>
        </div>
      </div>
    </div>
  </div>
</div>
